---
layout: post
title: Nodemailerì´ìš©í•˜ê¸°
category: instagram-clone
tags: [react, instagram-clone]
comments: true
---

# Nodemailerì´ìš©í•˜ê¸°

## nodeMailerë€?

nodeMailerëŠ” Node.js í™˜ê²½ì—ì„œ emailì„ ë³´ë‚´ì£¼ë„ë¡ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆì´ë‹¤.<br>
ë©”ì¼ì€ ì „ì†¡í•  ìˆ˜ ìˆê³  ë©”ì¼ì˜ ë‚´ìš©ì„ HTML ë¬¸ì„œë¡œ ì‚¬ìš©, í˜¹ì€ íŒŒì¼ ì²¨ë¶€ ê¸°ëŠ¥ë„ ê°€ëŠ¥í•˜ë‹¤.


## ì‚¬ìš© ë°©ë²•

> yarn add nodemailer<br>
> yarn add nodemailer-sendgrid-transport

```javascript
import dotenv from 'dotenv';
import path from 'path';
// .env íŒŒì¼ì´ srcí´ë”ì—ìˆëŠ”ë°, server.jsëŠ” srcí´ë” ë°–ì—ìˆë‹¤. ê·¸ë˜ì„œ envíŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ì§€ë¥¼ ëª»í•˜ê³  ìˆìœ¼ë¯€ë¡œ
// ê·¸ê±¸ í•´ê²°í•´ì£¼ëŠ” ì½”ë“œ
dotenv.config({ path: path.resolve(__dirname, '.env') });
import { adjectives, nouns } from './words';
import nodemailer from 'nodemailer';
import sgTransport from 'nodemailer-sendgrid-transport';

// ë¡œê·¸ì¸ ì¸ì¦ì„ ìœ„í•œ ëœë¤í•œ ë¬¸ìë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í•¨ìˆ˜ì´ë‹¤.
export const generateSecret = () => {
  const randomNumber = Math.floor(Math.random() * adjectives.length);
  return `${adjectives[randomNumber]} ${nouns[randomNumber]}`;
};

// ì‹¤ì œë¡œ ë©”ì¼ì„ ë³´ë‚´ì£¼ê¸° ìœ„í•œ í•¨ìˆ˜
const sendMail = (email) => {
  const options = {
    auth: {
      api_user: process.env.SENDGRID_USERNAME,
      api_key: process.env.SENDGRID_PASSWORD,
    },
  };
  const client = nodemailer.createTransport(sgTransport(options));

  return client.sendMail(email);
};

// ë©”ì¼ì˜ ì–‘ì‹ì„ ì§€ì •í•˜ëŠ” í•¨ìˆ˜
export const sendSecretMail = (address, secret) => {
  const email = {
    from: 'wndtlr1024@gmail.com',
    to: address,
    subject: 'Login Secret for PrismagramğŸ”’',
    html: `ì•ˆë…•í•˜ì„¸ìš”!ğŸ–ê·€í•˜ì˜ ë¡œê·¸ì¸ ë¹„ë°€ì½”ë“œì…ë‹ˆë‹¤." ${secret} ".<br/>ë¡œê·¸ì¸ í•˜ê¸° ìœ„í•´ ì›¹ì‚¬ì´íŠ¸ì•  ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ì–´ì£¼ì„¸ìš”`,
  };
  return sendMail(email);
};
```

- ì´ë©”ì¼ì„ ë³´ë‚´ë ¤ë©´ ì „ì†¡ê¸° ê°ì²´ê°€ í•„ìš”í•œë°,nodemailerì˜ ë©”ì†Œë“œì¸ createTransportë¥¼ ì´ìš©í•´ ë°œì†¡í•  ë©”ì¼ì˜ `ê°ì²´ë¥¼ ìƒì„±`í•œë‹¤.
- ë§Œë“¤ì–´ì§„ ê°ì²´ì˜ sendMail ë©”ì†Œë“œë¥¼ í†µí•´ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” ë©”ì¼ ì–‘ì‹ ë°ì´í„°ë¥¼ í†µí•´ ë©”ì¼ì„ ë°œì†¡í•  ìˆ˜ ìˆë‹¤.

